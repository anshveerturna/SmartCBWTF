spring:
  application:
    name: smart-cbwtf-backend
  datasource:
    url: jdbc:postgresql://localhost:5432/smart_cbwtf
    username: smart_cbwtf
    password: change-me
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
    open-in-view: false
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

server:
  port: 8080

security:
  jwt:
    # Use a 256-bit+ secret for HMAC-SHA signing; keep this out of VCS in real deployments.
    secret: "change-this-secret-please-use-32b-minimum-2025"
    issuer: "smart-cbwtf"
    access-token-ttl-minutes: 30

logging:
  level:
    root: INFO
    com.smartcbwtf: DEBUG

app:
  geofence:
    hcf-radius-m: 200
    facility-default-radius-m: 200
    enable-server-check: true       # Server-side geofence enforcement (authoritative)
  gps:
    min-accuracy-m: 50              # Minimum GPS accuracy required (meters)
    max-accuracy-m: 100             # Maximum allowed GPS accuracy for events
  weight:
    mismatch-threshold-kg: 0.5
  alerts:
    missing-bag-hours: 24
  
  # Email configuration
  email:
    enabled: false  # Set to true in production
    from: noreply@smartcbwtf.com
  
  # Agreement number format configuration
  # Default format: <FACILITY_CODE>-HCF-<YYYY>-<5-digit-sequence>
  # Example: GUT-HCF-2025-00023
  agreement:
    number:
      prefix: HCF                    # Middle prefix (e.g., HCF, AGR, BMW)
      separator: "-"                 # Separator character
      sequence-digits: 5             # Number of digits for sequence (padded with zeros)
      include-facility-code: true    # Whether to include facility code at start
      include-year: true             # Whether to include year
  
  # PDF generation settings
  pdf:
    output-dir: files/agreements     # Base directory for generated PDFs
    timezone: Asia/Kolkata           # Timezone for date formatting
